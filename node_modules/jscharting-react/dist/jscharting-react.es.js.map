{"version":3,"file":"jscharting-react.es.js","sources":["../src/index.jsx"],"sourcesContent":["import React from 'react';\r\nimport * as JSC from 'jscharting';\r\n\r\nexport default class JSCharting extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.applyProperties();\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderChart() {\r\n\t\tconst cb = this.props.callback;\r\n\t\tconst options = this.props.options || this.props;\r\n\t\tconst ignoreStateUpdate = this.props.ignoreStateUpdate;\r\n\t\tconst updateExisting =\r\n\t\t\tthis.instance && this.props.mutable !== false && !this.instance.dirty;\r\n\r\n\t\t// Skip update if chart exists and ignoreStateUpdate is true\r\n\t\tif (!this.instance || !ignoreStateUpdate) {\r\n\t\t\tif (updateExisting) {\r\n\t\t\t\tthis.instance.options(options);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.instance) {\r\n\t\t\t\t\tthis.instance.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tconst containerElement = this.container;\r\n\t\t\t\tconst config = Object.assign(\r\n\t\t\t\t\t{ targetElement: containerElement },\r\n\t\t\t\t\toptions\r\n\t\t\t\t);\r\n\t\t\t\tthis.instance = new JSC.Chart(config, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tapplyProperties() {\r\n\t\tconst containerElement = this.container;\r\n\t\tif (containerElement) {\r\n\t\t\tconst options = this.props.options || this.props;\r\n\t\t\tconst stringifySize = size =>\r\n\t\t\t\tsize && Number(size) === size ? size + 'px' : size;\r\n\t\t\tcontainerElement.style.width = stringifySize(options.width) || '100%';\r\n\t\t\tcontainerElement.style.height = stringifySize(options.height) || '100%';\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass JSCLabel extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderLabel();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.destroy();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderLabel();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tconst containerElement = this.container;\r\n\t\tif (containerElement) {\r\n\t\t\tcontainerElement.innerHTML = '';\r\n\t\t}\r\n\t}\r\n\r\n\trenderLabel() {\r\n\t\tthis.destroy();\r\n\t\tconst containerElement = this.container;\r\n\t\tconst options = this.props.options;\r\n\t\tconst textProperty = options && options.text;\r\n\t\tJSC.label(\r\n\t\t\tcontainerElement,\r\n\t\t\ttextProperty || options,\r\n\t\t\ttextProperty && options\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass JSCGrid extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderGrid();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.instance && this.instance.destroy();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderGrid();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderGrid() {\r\n\t\tconst cb = this.props.callback;\r\n\t\tconst options = this.props.options || this.props;\r\n\t\tconst updateExisting = this.instance && this.props.mutable;\r\n\r\n\t\tif (updateExisting) {\r\n\t\t\tthis.instance.options(options);\r\n\t\t} else {\r\n\t\t\tthis.instance && this.instance.destroy();\r\n\t\t\tconst containerElement = this.container;\r\n\t\t\tJSC.Grid(containerElement, options).then(grid => {\r\n\t\t\t\tthis.instance = grid;\r\n\t\t\t\tcb && cb(grid);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { JSCharting, JSCLabel, JSCGrid, JSC };\r\n"],"names":["JSCharting","props","instance","undefined","applyProperties","renderChart","dispose","node","container","className","cb","callback","options","ignoreStateUpdate","updateExisting","mutable","dirty","destroy","containerElement","config","Object","assign","targetElement","JSC","Chart","stringifySize","size","Number","style","width","height","React","Component","JSCLabel","renderLabel","innerHTML","textProperty","text","label","JSCGrid","renderGrid","Grid","then","grid"],"mappings":"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"}