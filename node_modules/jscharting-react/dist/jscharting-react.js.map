{"version":3,"file":"jscharting-react.js","sources":["../src/index.jsx"],"sourcesContent":["import React from 'react';\r\nimport * as JSC from 'jscharting';\r\n\r\nexport default class JSCharting extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.applyProperties();\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderChart() {\r\n\t\tconst cb = this.props.callback;\r\n\t\tconst options = this.props.options || this.props;\r\n\t\tconst ignoreStateUpdate = this.props.ignoreStateUpdate;\r\n\t\tconst updateExisting =\r\n\t\t\tthis.instance && this.props.mutable !== false && !this.instance.dirty;\r\n\r\n\t\t// Skip update if chart exists and ignoreStateUpdate is true\r\n\t\tif (!this.instance || !ignoreStateUpdate) {\r\n\t\t\tif (updateExisting) {\r\n\t\t\t\tthis.instance.options(options);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.instance) {\r\n\t\t\t\t\tthis.instance.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tconst containerElement = this.container;\r\n\t\t\t\tconst config = Object.assign(\r\n\t\t\t\t\t{ targetElement: containerElement },\r\n\t\t\t\t\toptions\r\n\t\t\t\t);\r\n\t\t\t\tthis.instance = new JSC.Chart(config, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tapplyProperties() {\r\n\t\tconst containerElement = this.container;\r\n\t\tif (containerElement) {\r\n\t\t\tconst options = this.props.options || this.props;\r\n\t\t\tconst stringifySize = size =>\r\n\t\t\t\tsize && Number(size) === size ? size + 'px' : size;\r\n\t\t\tcontainerElement.style.width = stringifySize(options.width) || '100%';\r\n\t\t\tcontainerElement.style.height = stringifySize(options.height) || '100%';\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass JSCLabel extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderLabel();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.destroy();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderLabel();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tconst containerElement = this.container;\r\n\t\tif (containerElement) {\r\n\t\t\tcontainerElement.innerHTML = '';\r\n\t\t}\r\n\t}\r\n\r\n\trenderLabel() {\r\n\t\tthis.destroy();\r\n\t\tconst containerElement = this.container;\r\n\t\tconst options = this.props.options;\r\n\t\tconst textProperty = options && options.text;\r\n\t\tJSC.label(\r\n\t\t\tcontainerElement,\r\n\t\t\ttextProperty || options,\r\n\t\t\ttextProperty && options\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass JSCGrid extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderGrid();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.instance && this.instance.destroy();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderGrid();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderGrid() {\r\n\t\tconst cb = this.props.callback;\r\n\t\tconst options = this.props.options || this.props;\r\n\t\tconst updateExisting = this.instance && this.props.mutable;\r\n\r\n\t\tif (updateExisting) {\r\n\t\t\tthis.instance.options(options);\r\n\t\t} else {\r\n\t\t\tthis.instance && this.instance.destroy();\r\n\t\t\tconst containerElement = this.container;\r\n\t\t\tJSC.Grid(containerElement, options).then(grid => {\r\n\t\t\t\tthis.instance = grid;\r\n\t\t\t\tcb && cb(grid);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { JSCharting, JSCLabel, JSCGrid, JSC };\r\n"],"names":["JSCharting","props","instance","undefined","applyProperties","renderChart","dispose","React","node","container","className","cb","callback","options","ignoreStateUpdate","updateExisting","mutable","dirty","destroy","containerElement","config","Object","assign","targetElement","JSC","Chart","stringifySize","size","Number","style","width","height","Component","JSCLabel","renderLabel","innerHTML","textProperty","text","label","JSCGrid","renderGrid","Grid","then","grid"],"mappings":"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"}